# HEARTBEAT.md - æ·±å¤œæ¨¡å¼é…ç½®

## æ·±å¤œæ¨¡å¼è®¾ç½®
- **å®‰é™æ—¶æ®µ**: 23:00 - 07:00 (Asia/Shanghai)
- **é€šçŸ¥æ¸ é“**: é£žä¹¦å’Œ Slack
- **å½“å‰æ—¶é—´æ£€æŸ¥**: åœ¨æ‰§è¡Œä»»ä½•é€šçŸ¥ä»»åŠ¡å‰ï¼Œå…ˆæ£€æŸ¥å½“å‰æ—¶é—´

## æ—¶é—´åˆ¤æ–­é€»è¾‘
```python
import datetime
from datetime import timezone

def is_night_mode():
    """åˆ¤æ–­å½“å‰æ˜¯å¦åœ¨æ·±å¤œæ¨¡å¼ï¼ˆ23:00-07:00ï¼‰"""
    now = datetime.datetime.now(timezone.utc).astimezone(
        datetime.timezone(datetime.timedelta(hours=8))
    )
    hour = now.hour
    return hour >= 23 or hour < 7

def should_notify():
    """åˆ¤æ–­å½“å‰æ—¶é—´æ˜¯å¦å¯ä»¥å‘é€é€šçŸ¥"""
    return not is_night_mode()
```

## æ·±å¤œæ¨¡å¼æ£€æŸ¥æµç¨‹

### å¿ƒè·³æŽ¥æ”¶æ—¶çš„å¤„ç†
1. å…ˆè¿è¡Œ `/root/clawd/scripts/night-mode-check.py check`
2. å¦‚æžœè¿”å›žéžé›¶ç ï¼ˆæ·±å¤œæ¨¡å¼ï¼‰ï¼Œåˆ™ï¼š
   - è®°å½•åˆ°æ—¥å¿—ï¼š"[æ—¶é—´] æ·±å¤œæ¨¡å¼ï¼Œè·³è¿‡é€šçŸ¥"
   - å›žå¤ï¼šHEARTBEAT_OK
   - ä¸æ‰§è¡Œä»»ä½•é€šçŸ¥ç›¸å…³çš„æ£€æŸ¥
3. å¦‚æžœè¿”å›žé›¶ç ï¼ˆç™½å¤©ï¼‰ï¼Œåˆ™ï¼š
   - ç»§ç»­æ‰§è¡Œä»¥ä¸‹æ£€æŸ¥

## å¿ƒè·³æ£€æŸ¥ä»»åŠ¡ï¼ˆä»…åœ¨ç™½å¤©æ‰§è¡Œï¼‰
- Email æ£€æŸ¥
- Calendar äº‹ä»¶æé†’ï¼ˆ<2hï¼‰
- Twitter/social é€šçŸ¥
- Weather æ›´æ–°
- æˆå°±ç³»ç»Ÿè¿›åº¦æ£€æŸ¥ï¼ˆæ¯ 4 å°æ—¶ä¸€æ¬¡ï¼‰
- è‡ªåŠ¨åŒ–æµç¨‹ç›‘æŽ§ï¼ˆæ¯ 6 å°æ—¶ä¸€æ¬¡ï¼‰

## æ·±å¤œç›‘å·¥ä»»åŠ¡ï¼ˆ23:00-07:00ï¼‰
- **å®¡æŸ¥ä»£ç†æ£€æŸ¥**: ä½¿ç”¨ `/root/clawd/scripts/check-review-agent.sh` æ£€æŸ¥ review-agent å’Œ achievement-system-dev çš„çŠ¶æ€
- **AI ä¿¡æ¯æœç´¢**: ä½¿ç”¨ searXNG æœç´¢ AI ç›¸å…³ä¿¡æ¯ï¼Œåˆ†æžå¹¶ä¿å­˜åˆ° `/root/clawd/memory/ai-research/`
- **å­ä»£ç†ç›‘å·¥**: ç¡®ä¿ achievement-system-dev æ­£å¸¸å·¥ä½œï¼Œå·¥å…·å¯ç”¨
- **è¿›åº¦è®°å½•**: å°†å‘çŽ°çš„é—®é¢˜å’Œè¿›å±•è®°å½•åˆ° daily memory

## æ·±å¤œæ¨¡å¼ä¾‹å¤–
- ç´§æ€¥äº‹ä»¶
- å®‰å…¨è­¦æŠ¥
- ç”¨æˆ·æ˜Žç¡®è¦æ±‚çš„é€šçŸ¥
- **AI ç ”ç©¶ä»»åŠ¡**ï¼ˆjack æŽˆæƒï¼Œä½¿ç”¨ searXNG æœç´¢ AI ç›¸å…³ä¿¡æ¯ï¼‰
- **å®¡æŸ¥ä»£ç†ç›‘ç£**ï¼ˆæ£€æŸ¥å­ä»£ç†å¼€å‘è¿›åº¦ï¼‰

## ðŸ“Š ç™½å¤©æ£€æŸ¥ä»»åŠ¡è¯¦ç»†è¯´æ˜Ž

### æˆå°±ç³»ç»Ÿè¿›åº¦æ£€æŸ¥ï¼ˆæ¯ 4 å°æ—¶ï¼‰
```bash
# æ£€æŸ¥è„šæœ¬
/root/clawd/scripts/check-achievement-progress.sh

# æ£€æŸ¥å†…å®¹
1. å­ä»£ç†çŠ¶æ€ï¼ˆachievement-system-devï¼‰
2. ç»ˆç«¯å·¥å…·å¼€å‘è¿›åº¦
3. æˆå°±æ•°æ®æ”¶é›†çŠ¶æ€
4. å‘é€è¿›åº¦æŠ¥å‘Šåˆ° Slack/Feishu
```

### è‡ªåŠ¨åŒ–æµç¨‹ç›‘æŽ§ï¼ˆæ¯ 6 å°æ—¶ï¼‰
```bash
# æ£€æŸ¥è„šæœ¬
/root/clawd/scripts/check-automation-status.sh

# æ£€æŸ¥å†…å®¹
1. full-prompt-workflow.sh æœ€åŽè¿è¡Œæ—¶é—´
2. æœ€è¿‘ä¸€æ¬¡è¿è¡Œæ˜¯å¦æœ‰é”™è¯¯
3. æ”¶é›†/è½¬æ¢/å‘å¸ƒæ•°é‡ç»Ÿè®¡
4. ClawdHub è®¤è¯çŠ¶æ€
```

### å·¥å…·å’ŒæŠ€èƒ½ä½¿ç”¨è®°å½•ï¼ˆæŒç»­ï¼‰
```bash
# è®°å½•è„šæœ¬
/root/clawd/scripts/record-tool-usage.sh

# è®°å½•å†…å®¹
1. ä½¿ç”¨äº†å“ªäº›å·¥å…·ï¼ˆcoding-agent, searXNG ç­‰ï¼‰
2. ä½¿ç”¨äº†å“ªäº›æŠ€èƒ½
3. ä»»åŠ¡ç±»åž‹å’Œç»“æžœ
4. ä¿å­˜åˆ° memory/tool-usage/
```

## çŠ¶æ€è·Ÿè¸ª
- è®°å½•æœ€åŽæ£€æŸ¥æ—¶é—´åˆ° `memory/heartbeat-state.json`
- é¿å…é‡å¤é€šçŸ¥åŒä¸€äº‹ä»¶
